---
title: React实践：NC资源管理系统
link: dev_for_patch_system
date: 2016-09-02 00:00:00
categories: work
tags: [react, express, mongod, elasticsearch, patch]
---



部门内统一管理补丁和文档的SPA应用；

使用了React + express + mongod + elasticsearch

个人项目，开发历程暂搁于此

![patch-preview](https://edeity.oss-cn-shenzhen.aliyuncs.com/2016/patch-preview.jpg)

## 开发日志

[代码](https://github.com/edeity/patch)

### 现阶段任务

- [ ] 分享链接 


- [ ] Word预览
- [ ] 二级目录
- [ ] 附件（如附带在补丁上的sql脚本）
- [ ] Markdown

### 后续开发

- 2017-06-15
  - Word预览 && 全屏

### 支持上传，搜索，预览Word(v0.12)

- 2017-01-17
  - 上传并解析Word内容
  - 随机文件名，通过配置content-disposition更改文件名
- 2017-01-18
  - 第三方插件，生成对应的html
  - 样式微调
- 2017-02-21
  - 前台挪到create-react-app中部署
  - window下写了个脚本，便于部署(pm2, pushstate-server)
- 2017-03-05
  - 样式：sass，css微调，字体
  - 操作习惯：上传按钮，页签

### 优化健全,部署使用( v0.11)
- 2016-08-31
    - 易用性: 合并上传补丁按钮
    - 分页
- 2016-09-01
    - 易用性: 补丁链接复制(便于分享)
- 2016-09-02
    - fix:支持IE9+
- 2016-09-03
    - fix:
        - 10M上传限制
        - 首次进入时不加载patchlist
        - 搜索后点击其他patch仍高亮显示
        - 拖拉时, activeCategory为移动后的目录
        - zip文件, 未能找到packdataxml文件时, 正常录入
        - 部分补丁不正常解析错误
    - 功能拓展
        - <del>更改文件名时的同时更改补丁文件名称</del>
        - 显示属性MD5(便于上传重复时进行搜索)
        - 允许搜索垃圾箱(通过文件标注图标区分) 
        - 更改目录时,同步更改文件路径, 并添加category目录注释

### 支持搜索(v.0.03)
- 2016-08-20
    - 自动分析录入补丁信息, 录入流程更改
    - 根据类名搜索更改补丁
- 2016-08-21
    - 百分比布局
    - 样式美化(引入font-awesome等)
- 2016-08-22
    - diff研究(未对应实际代码)
- 2016-08-23
    - fix(更改于22号月评)
        - 预置目录不可更改
        - 搜索后显示总项
        - 文件存储路径对应文件名和所属分类
    - 从文件路径中导入模块名(有用的属性) 
- 2016-08-24
    - 同步mongodb, 使用elasticsearch搜索引擎
- 2016-08-25
    - elasticsearch && 搜索高亮 
- 2016-08-28
    - 增加批量上传及上传可视化面板 
    - 文件重名处理
- 2016-08-29
    - fix: 垃圾箱分类不可搜索
    - sidebar组件html, css重构
    - 文件MD5校验

### 基本功能(v0.02)

- 2016-08-14
    - 更新补丁时,删除旧补丁 
    - 允许新建分类目录&&目录重命名
- 2016-08-15
    - 允许拖拉更改补丁分类  
- 2016-08-16
    - 更多补丁分类(系统,用户,回收站) 
    - 完善补丁列表交互(垃圾箱不显示工具栏)
- 2016-08-19
    - 表单组件化(FE) && 提交策略更改(仅表单有变化时才提交到服务器) 

### 原型(v0.01)

- 2016-08-08
    - 确定技术要点:react + express + mongodb
    - 初步完成基本的框架搭建和前后台草图
- 2016-08-09
    - 确定SPA基本功能,编写动态界面
- 2016-08-10
    - 设计基本数据库 && 编写后台接口 
- 2016-08-11
    - 前后台对接, 修复若干BUG, 思考新功能拓展点



